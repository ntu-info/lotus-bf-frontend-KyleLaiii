
/* App.css baseline (hoverless look is enforced inline in App.jsx too) */
:root {
  --bg: #d9dfe8ff;
  --fg: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
  --radius: 14px;
  --primary-600: #2563eb;
  --btn-font-size: 12px;
  --btn-py: 6px;
  --btn-px: 10px;
  --btn-radius: 8px;
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.app {
  max-width: none;
  margin: 0;
  padding: 0 8px 16px 8px;  /* ğŸ‘ˆ å›ºå®šåº•è· */
}

.app__grid { display: flex; gap: 0; width: 100%; }
.app__grid { height: calc(100vh + 260px); }
.app__grid > .card {
  flex: 1 1 0;
  min-width: 200px;
  overflow: auto;
  height: 100%;               /* é—œéµï¼šæ’æ»¿çˆ¶å±¤é«˜åº¦ */
  display: flex;              /* è®“å…§éƒ¨å¯å½ˆæ€§æ’é–‹ */
  flex-direction: column;
}
.app__grid > .col { height: 100%; }

.resizer { width: 8px; cursor: col-resize; position: relative; user-select: none; touch-action: none; align-self: stretch; background: transparent; }
.resizer::after { content:''; position:absolute; top:0; bottom:0; left:3px; width:2px; background: var(--border); transition: background .15s ease; }
.resizer:hover::after { background: #9ca3af; }

.card { background:white; border:1px solid var(--border); border-radius: var(--radius); padding:12px; }
.card__title { font-weight:600; margin-bottom:10px; }
.card--stack > .divider { height:1px; background:var(--border); margin:12px 0; }

.hint { margin-top: 8px; color: var(--muted); font-size: 12px; }
.hint__code { background:#f3f4f6; padding:2px 6px; border-radius:8px; }

/* Downsized buttons (no hover/active change) */
button, .btn, [role="button"], .button {
  background: var(--primary-600);
  color:#fff;
  border:none;
  border-radius: var(--btn-radius);
  padding: var(--btn-py) var(--btn-px);
  font-weight:600;
  font-size: var(--btn-font-size);
  line-height:1.1;
  cursor:pointer;
}
button:hover, .btn:hover, [role="button"]:hover, .button:hover,
button:active, .btn:active, [role="button"]:active, .button:active {
  background: var(--primary-600);
  color: #fff;
}
button:disabled, .btn:disabled { opacity:.55; cursor:not-allowed; }

.card input[type="text"],
.card input[type="search"],
.card input[type="number"],
.card select,
.card textarea { width:100%; max-width:100%; display:block; }

.app__footer { margin-top:16px; color:var(--muted); font-size:12px; display:flex; gap:10px; align-items:center; border-top:1px solid var(--border); padding-top:12px; }

@media (max-width: 1023px) {
  .app { padding: 12px; }
  .app__grid { flex-direction: column; }
  .resizer { display: none; }
}


/* QueryBuilder fallback styles (when Tailwind classes are not present) */
.qb__input {
  width: 100%;
  max-width: 100%;
  display: block;
  padding: 12px 16px;
  border: 1px solid var(--border);
  border-radius: 100px;  /* è¶…æ©¢åœ“ */
  height: 44px;          /* å¯ä¾å–œå¥½ 40â€“48px */
  outline: none;
  font-size: 16px;      /* æ”¾å¤§è¼¸å…¥å­— */
  line-height: 1.4;
}

.qb__input:focus {
  box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25);
}


/* Ensure QueryBuilder input doesn't collapse too narrow */
.qb { width: 100%; }
.qb__input { width: 100%; min-width: 420px; }
@media (min-width: 1024px) {
  .qb__input { min-width: 640px; }
}

/* è®“æ¨™é¡Œå¸¶æ»¿æ•´å€‹ viewport å¯¬åº¦ï¼ˆä¸å—å…¶ä»–å®¹å™¨é™åˆ¶ï¼‰ */
.site-banner {
  width: 100vw;
  margin-left: calc(50% - 50vw);   /* full-bleedï¼šå·¦å³è²¼é½Šè¦–çª— */
  margin-right: calc(50% - 50vw);
  margin-top: 0;
  margin-bottom: 16px;
  background: #93c5fd;
  border-radius: 0 0 16px 16px;    /* ä¸Šç·£è²¼é½Šï¼Œä¿ç•™ä¸‹ç·£åœ“è§’ */
  box-shadow: 0 4px 14px rgba(0,0,0,0.08);
  overflow: hidden;
}

/* å…§éƒ¨æ’ç‰ˆã€å­—è‰²ç¶­æŒ */
.site-banner__inner { padding: 14px 20px; color: #fff; }

.site-banner__title {
  margin: 0;
  font-size: 22px;
  font-weight: 800;
  letter-spacing: 0.2px;
  line-height: 1.2;
  color: #fff;                   /* ä¿éšªèµ·è¦‹å†æŒ‡å®šä¸€æ¬¡ç™½è‰² */
}

.site-banner__subtitle {
  margin-top: 4px;
  font-size: 13px;
  line-height: 1.3;
  color: rgba(255,255,255,0.9);  /* ç•¥æ·¡çš„ç™½å­—ï¼Œå±¤æ¬¡æ„Ÿ */
}

/* è‹¥åœ¨å¾ˆçª„çš„è¢å¹•ï¼Œè®“å¸¶ç‹€å¯ä»¥æ”¾å¯¬ä¸€é»é¿å…æ“ çˆ† */
@media (max-width: 640px) {
  .site-banner {
    max-width: 100%;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }
}

.subcard {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
}

.col {
  background: transparent;
  border: none;
  padding: 0;
}

/* è®“ Query è¼¸å…¥æ¡†èˆ‡æŒ‰éˆ•åˆ—ä¸æœƒè²¼åœ¨ä¸€èµ· */
.qb__input { margin-bottom: 10px; }

/* é‚è¼¯æŒ‰éˆ•åˆ—ï¼šä¸€æ’æœƒè‡ªå‹•æ›è¡Œï¼Œé–“è·å›ºå®š */
.qb-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;           /* å›ºå®šé–“è· */
  margin-top: 4px;    /* èˆ‡è¼¸å…¥æ¡†ç•™ç™½ï¼Œé¿å…è¦–è¦ºé‡ç–Š */
}

/* å›ºå®šæ¯é¡†æŒ‰éˆ•å¯¬åº¦ï¼Œç½®ä¸­é¡¯ç¤º */
.qb-toolbar .btn {
  width: 72px;        /* ä½ å¯æ”¹ 64â€“88 ä¾å–œå¥½ */
  justify-content: center;
}

/* Related è³‡æ–™æ¡†ï¼ˆç™½åº•ã€åœ“è§’ã€é‚Šæ¡†ï¼‰ */
.related-card {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
}

/* é¡ä¼¼ terms æœå°‹æ¡†é¢¨æ ¼çš„è† å›Šé¡¯ç¤ºä¸€ç­†è³‡æ–™ */
.related-pill {
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  border-radius: 20px;
  border: 2px solid #bfdbfe;     /* æ·ºè—å¤–æ¡† */
  background: #f3f4f6;           /* æ·ºç°åº• */
  cursor: default;
}
.related-term { font-size: 16px; font-weight: 700; color: #1f2937; }
.related-sub  { font-size: 13px; color: #4b5563; margin-top: 4px; }

.related-empty {
  font-size: 13px;
  color: #6b7280;
  padding: 6px 2px;
}

.related-error {
  font-size: 13px;
  color: #991b1b;
  background: #fee2e2;
  border: 1px solid #fecaca;
  border-radius: 8px;
  padding: 8px;
}

/* Related æ¨™é¡Œèˆ‡æ•¸é‡æ§åˆ¶ */
.related-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* margin-bottom: 10px;  (card__title æœƒè‡ªå¸¶ mb) */
}
/* è¦†è“‹ .card__title é è¨­çš„ margin-bottomï¼Œå› ç‚º header å·²ç¶“æœ‰é–“è· */
.related-header .card__title {
  margin-bottom: 0; 
}
.related-count-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #4b5563;
}
.related-count-input {
  width: 60px; /* å¯¬åº¦å›ºå®š */
  padding: 4px 8px;
  border: 1px solid #d1d5db; /* æ·ºç°è‰² border */
  border-radius: 8px;
  font-size: 13px;
  text-align: center;
}
.related-count-input:focus {
  outline: none;
  border-color: var(--primary-600);
  box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
}

/* * ----------------------------------------------
 * é€™æ˜¯ä½ è¦æ±‚çš„é—œéµä¿®æ”¹ï¼š
 * 1. æ–°å¢ä¸€å€‹ .related-pills-container
 * 2. ä¿®æ”¹ .related-pill çš„ width
 * ----------------------------------------------
 */

/* 1. æ–°å¢ï¼šRelated è©å½™çš„ flex-wrap å®¹å™¨ */
.related-pills-container {
  display: flex;
  flex-wrap: wrap; /* ğŸ‘ˆ é—œéµï¼šå…è¨±è† å›Šæ›è¡Œ */
  gap: 6px;        /* è† å›Šä¹‹é–“çš„é–“è· */
  margin-top: 8px; /* èˆ‡ä¸Šæ–¹æ§åˆ¶é …çš„é–“è· */
}

/* 2. ä¿®æ”¹ï¼š.related-pill æ¨£å¼ */
.related-pill {
  /* åŸæœ¬æ˜¯ width: 100%; 
    é€™æœƒå°è‡´å®ƒæ°¸é ä½”æ»¿æ•´è¡Œï¼Œç„¡æ³•ä¸¦æ’ã€‚
  */
  width: auto; /* ğŸ‘ˆ é—œéµï¼šå¯¬åº¦æ”¹ç‚ºç”±å…§å®¹æ±ºå®š */
  
  text-align: left;
  padding: 10px 14px; /* ç¨å¾®ç¸®å°ä¸€é» padding è®“å®ƒæ›´åƒ chip */
  border-radius: 20px;
  border: 2px solid #bfdbfe;     /* æ·ºè—å¤–æ¡† */
  background: #f3f4f6;           /* æ·ºç°åº• */
  cursor: default;
}

/* Segmented control */
.segmented{
  display:inline-flex;
  gap:2px;
  padding:2px;
  border:1px solid var(--border);
  border-radius:999px;
  background:#fff;
}
.segmented > button{
  border:0;
  background:transparent;
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  cursor:pointer;
}
.segmented > button[data-active="true"]{
  background:#2563eb;
  color:#fff;
}

/* å°è¡¨æ ¼é¢¨æ ¼ï¼ˆç¬¬ 3 é» X/Y/Z æœƒç”¨åˆ°ï¼‰ */
.field.vstack{ display:flex; flex-direction:column; gap:6px; margin-top:10px; }
.field.vstack > span{ font-size:12px; color:#555; }
.field.vstack > input{
  border:1px solid #9ca3af;
  border-radius:8px;
  padding:6px 8px;
  font-size:13px;
}

/* å°‡ X/Y/Z ä¸‰æ ¼æ’æˆç­‰å¯¬ä¸‰æ¬„ */
.coord-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  column-gap: 16px;   /* ä¸‰æ¬„ä¹‹é–“çš„è·é›¢ */
  row-gap: 8px;       /* æœªä¾†å¦‚æœ‰ç¬¬äºŒåˆ—ä¹Ÿæœƒæœ‰é–“è· */
  margin-top: 6px;
}

/* è®“ X/Y/Z å€å¡Šèˆ‡ä¸‹æ–¹çš„ä¸‰å¼µåœ–ä¹‹é–“æœ‰ç©ºé–“ */
.coord-grid--spaced {
  margin-bottom: 16px;  /* é—œéµï¼šèˆ‡åˆ‡é¢åœ–æ‹‰é–‹è·é›¢ */
}

/* ä¸‰å¼µåœ–çš„å®¹å™¨ï¼šå›ºå®šä¸‰æ¬„ */
.slices-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 16px;            /* ä¸‰å¼µåœ–ä¹‹é–“çš„è·é›¢ */
  margin-top: 12px;     /* èˆ‡ X/Y/Z è¼¸å…¥å€çš„è·é›¢ */
}

/* æ¯å€‹ cell å¯é¸æ“‡æ€§å¾®èª¿ */
.slice-cell {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* æ¨™ç±¤ç½®ä¸­ï¼Œèˆ‡åœ–ç‰‡ç•™ç™½ */
.slice-label {
  text-align: center;
  font-size: 12px;
  color: #5b6573;
  margin-bottom: 8px;   /* æ¨™é¡Œèˆ‡åœ–çš„è·é›¢ */
}

.nii-slice {
  height: 90px;        /* ä¸‰å¼µåœ–ä¸€è‡´çš„é«˜åº¦ */
  width: auto;          /* ä¾åŸå§‹æ¯”ä¾‹ç¸®æ”¾ */
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
}

